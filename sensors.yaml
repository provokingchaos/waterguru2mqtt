##############################################################################
# WaterGuru → MQTT Home Assistant Sensors
#
# SAMPLE sensors.yaml for Home Assistant
# --------------------------------------
# - Replace <pool_slug> with your pool slug (auto-generated by waterguru2mqtt)
# - Replace friendly names if desired
# - Save this file to: /config/packages/waterguru.yaml OR /config/sensors.yaml
#
# Example pool slug: park_meadow_pool
#
# These sensors track:
#   - Water temperature
#   - pH, Free Chlorine, TA, CH, CYA, TH
#   - Battery % and Cassette reads left
#   - Signal strength
#   - Alert counts
#   - Last measurement timestamp
##############################################################################

mqtt:
  sensor:

    ##########################################################################
    # BASIC POOL INFO
    ##########################################################################

    - name: "WaterGuru Pool Status"
      unique_id: waterguru_<pool_slug>_status
      state_topic: "waterguru/<pool_slug>/status"
      icon: mdi:pool

    - name: "WaterGuru Water Temperature"
      unique_id: waterguru_<pool_slug>_water_temperature
      state_topic: "waterguru/<pool_slug>/water_temp"
      unit_of_measurement: "°F"
      device_class: temperature
      state_class: measurement
      icon: mdi:coolant-temperature

    - name: "WaterGuru Last Measurement"
      unique_id: waterguru_<pool_slug>_last_measurement
      state_topic: "waterguru/<pool_slug>/latest_measure_time"
      device_class: timestamp
      icon: mdi:calendar-clock


    ##########################################################################
    # REFILLABLES
    ##########################################################################

    - name: "WaterGuru Cassette Days Remaining"
      unique_id: waterguru_<pool_slug>_cassette_days_remaining
      state_topic: "waterguru/<pool_slug>/refillables/cassette/time_left_text"
      icon: mdi:calendar-clock

    - name: "WaterGuru Cassette Remaining Reads"
      unique_id: waterguru_<pool_slug>_cassette_remaining
      state_topic: "waterguru/<pool_slug>/refillables/cassette/reads_left"
      unit_of_measurement: "reads"
      state_class: measurement
      icon: mdi:counter

    - name: "WaterGuru Battery"
      unique_id: waterguru_<pool_slug>_battery
      state_topic: "waterguru/<pool_slug>/refillables/battery/percent_left"
      unit_of_measurement: "%"
      device_class: battery
      state_class: measurement
      icon: mdi:battery


    ##########################################################################
    # SIGNAL + FLOW
    ##########################################################################

    - name: "WaterGuru Signal Strength"
      unique_id: waterguru_<pool_slug>_signal_strength
      state_topic: "waterguru/<pool_slug>/pods/0/rssiInfo/rssi"
      unit_of_measurement: "dBm"
      device_class: signal_strength
      state_class: measurement
      icon: mdi:wifi

    - name: "WaterGuru Skimmer Flow"
      unique_id: waterguru_<pool_slug>_skimmer_flow
      state_topic: "waterguru/<pool_slug>/flow_gpm"
      unit_of_measurement: "gpm"
      state_class: measurement
      icon: mdi:waves

    - name: "WaterGuru Skimmer Flow Alert"
      unique_id: waterguru_<pool_slug>_skimmer_flow_alert
      state_topic: "waterguru/<pool_slug>/alerts/summary"
      icon: mdi:alert-circle


    ##########################################################################
    # FREE CHLORINE
    ##########################################################################

    - name: "WaterGuru Free Chlorine"
      unique_id: waterguru_<pool_slug>_free_chlorine
      state_topic: "waterguru/<pool_slug>/measurement/free_cl/value"
      unit_of_measurement: "ppm"
      state_class: measurement
      icon: mdi:water

    - name: "WaterGuru Free Chlorine Alert Count"
      unique_id: waterguru_<pool_slug>_free_chlorine_alert
      state_topic: "waterguru/<pool_slug>/measurement/free_cl/alerts/count"
      icon: mdi:alert-circle


    ##########################################################################
    # pH
    ##########################################################################

    - name: "WaterGuru pH"
      unique_id: waterguru_<pool_slug>_ph
      state_topic: "waterguru/<pool_slug>/measurement/ph/value"
      state_class: measurement
      icon: mdi:beaker

    - name: "WaterGuru pH Alert Count"
      unique_id: waterguru_<pool_slug>_ph_alert
      state_topic: "waterguru/<pool_slug>/measurement/ph/alerts/count"
      icon: mdi:alert-circle


    ##########################################################################
    # TOTAL ALKALINITY (TA)
    ##########################################################################

    - name: "WaterGuru Total Alkalinity"
      unique_id: waterguru_<pool_slug>_total_alkalinity
      state_topic: "waterguru/<pool_slug>/measurement/ta/value"
      unit_of_measurement: "ppm"
      state_class: measurement
      icon: mdi:chart-bar

    - name: "WaterGuru Total Alkalinity Alert Count"
      unique_id: waterguru_<pool_slug>_total_alkalinity_alert
      state_topic: "waterguru/<pool_slug>/measurement/ta/alerts/count"
      icon: mdi:alert-circle


    ##########################################################################
    # CALCIUM HARDNESS (CH)
    ##########################################################################

    - name: "WaterGuru Calcium Hardness"
      unique_id: waterguru_<pool_slug>_calcium_hardness
      state_topic: "waterguru/<pool_slug>/measurement/ch/value"
      unit_of_measurement: "ppm"
      state_class: measurement
      icon: mdi:chart-line

    - name: "WaterGuru Calcium Hardness Alert Count"
      unique_id: waterguru_<pool_slug>_calcium_hardness_alert
      state_topic: "waterguru/<pool_slug>/measurement/ch/alerts/count"
      icon: mdi:alert-circle


    ##########################################################################
    # CYANURIC ACID (CYA)
    ##########################################################################

    - name: "WaterGuru Cyanuric Acid (Stabilizer)"
      unique_id: waterguru_<pool_slug>_cyanuric_acid
      state_topic: "waterguru/<pool_slug>/measurement/cya/value"
      unit_of_measurement: "ppm"
      state_class: measurement
      icon: mdi:shield

    - name: "WaterGuru Cyanuric Acid Alert Count"
      unique_id: waterguru_<pool_slug>_cyanuric_acid_alert
      state_topic: "waterguru/<pool_slug>/measurement/cya/alerts/count"
      icon: mdi:alert-circle


    ##########################################################################
    # TOTAL HARDNESS (TH)
    ##########################################################################

    - name: "WaterGuru Total Hardness"
      unique_id: waterguru_<pool_slug>_total_hardness
      state_topic: "waterguru/<pool_slug>/measurement/th/value"
      unit_of_measurement: "ppm"
      state_class: measurement
      icon: mdi:water-opacity

    - name: "WaterGuru Total Hardness Alert Count"
      unique_id: waterguru_<pool_slug>_total_hardness_alert
      state_topic: "waterguru/<pool_slug>/measurement/th/alerts/count"
      icon: mdi:alert-circle
